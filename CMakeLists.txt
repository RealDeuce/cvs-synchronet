project (Synchronet C CXX)

cmake_minimum_required(VERSION 2.8.11)

if(NOT PROJECTS)
	SET(PROJECTS SyncTERM;SyncDraw;SExPOTS;Tone;SMBLib;SBBS3 CACHE STRING "Choose the projects to build, options are: SyncTERM" FORCE)
	if(WIN32)
		list(APPEND PROJECTS CIOXtrn)
	endif()
endif()

if(MSVC)
	set_property(DIRECTORY APPEND PROPERTY COMPILE_OPTIONS /wd4996)
endif()

list(FIND PROJECTS SBBS3 BUILD_SBBS3)
if(BUILD_SBBS3 GREATER -1)
	if(NOT XPDEV_ADDED)
		add_subdirectory(xpdev)
		set(XPDEV_ADDED TRUE)
	endif()
	if(NOT CONIO_ADDED)
		add_subdirectory(conio)
		set(CONIO_ADDED TRUE)
	endif()
	if(NOT UIFC_ADDED)
		add_subdirectory(uifc)
		set(UIFC_ADDED TRUE)
	endif()
	list(APPEND PROJECTS SMBLib)
	add_subdirectory(sbbs3)
endif()

list(FIND PROJECTS SyncTERM BUILD_SYNCTERM)
if(BUILD_SYNCTERM GREATER -1)
	if(NOT XPDEV_ADDED)
		add_subdirectory(xpdev)
		set(XPDEV_ADDED TRUE)
	endif()
	if(NOT CONIO_ADDED)
		add_subdirectory(conio)
		set(CONIO_ADDED TRUE)
	endif()
	if(NOT UIFC_ADDED)
		add_subdirectory(uifc)
		set(UIFC_ADDED TRUE)
	endif()
	add_subdirectory(syncterm)
endif()

list(FIND PROJECTS SyncDraw BUILD_SYNCDRAW)
if(BUILD_SYNCDRAW GREATER -1)
	if(NOT XPDEV_ADDED)
		add_subdirectory(xpdev)
		set(XPDEV_ADDED TRUE)
	endif()
	if(NOT CONIO_ADDED)
		add_subdirectory(conio)
		set(CONIO_ADDED TRUE)
	endif()
	add_subdirectory(syncdraw)
endif()

list(FIND PROJECTS SExPOTS BUILD_SEXPOTS)
if(BUILD_SEXPOTS GREATER -1)
	if(NOT XPDEV_ADDED)
		add_subdirectory(xpdev)
		set(XPDEV_ADDED TRUE)
	endif()
	add_subdirectory(sexpots)
endif()

list(FIND PROJECTS Tone BUILD_TONE)
if(BUILD_TONE GREATER -1)
	if(NOT XPDEV_ADDED)
		add_subdirectory(xpdev)
		set(XPDEV_ADDED TRUE)
	endif()
	add_subdirectory(tone)
endif()

list(FIND PROJECTS SMBLib BUILD_SMBLIB)
if(BUILD_SMBLIB GREATER -1)
	if(NOT XPDEV_ADDED)
		add_subdirectory(xpdev)
		set(XPDEV_ADDED TRUE)
	endif()
	add_subdirectory(smblib)
endif()

list(FIND PROJECTS CIOXtrn BUILD_CIOXTRN)
if(BUILD_CIOXTRN GREATER -1)
	if(NOT XPDEV_ADDED)
		add_subdirectory(xpdev)
		set(XPDEV_ADDED TRUE)
	endif()
	if(NOT CONIO_ADDED)
		add_subdirectory(conio)
		set(CONIO_ADDED TRUE)
	endif()
	add_subdirectory(cioxtrn)
endif()
