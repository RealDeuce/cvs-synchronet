project (Synchronet C CXX)

cmake_minimum_required(VERSION 2.8.11)

INCLUDE(build/SynchronetMacros.cmake)

if(NOT PROJECTS)
	SET(PROJECTS SyncTERM;SyncDraw;SExPOTS;Tone;SMBLib;SBBS3;CIOXtrn CACHE STRING "Choose the projects to build, options are: SyncTERM" FORCE)
endif()

macro(add_subdirs)
	foreach(ARG IN ITEMS ${ARGV})
		string(TOUPPER ${ARG} UC_ARG)
		list(FIND ADDED ${UC_ARG} FOUND)
		if(${FOUND} EQUAL -1)
			add_subdirectory(${ARG})
			list(APPEND ADDED ${UC_ARG})
		endif()
	endforeach()
endmacro()

foreach(PROJECT IN ITEMS ${PROJECTS})
	if(${PROJECT} STREQUAL SBBS3)
		add_subdirs(xpdev conio uifc)
		list(FIND PROJECTS SMBLib FOUND)
		if(${FOUND} EQUAL -1)
			list(APPEND PROJECTS SMBLib)
		endif()
		add_subdirectory(sbbs3)
	endif()
	if(${PROJECT} STREQUAL SyncTERM)
		add_subdirs(xpdev conio uifc)
		add_subdirectory(syncterm)
	endif()
	if(${PROJECT} STREQUAL SyncDraw)
		add_subdirs(xpdev conio)
		add_subdirectory(syncdraw)
	endif()
	if(${PROJECT} STREQUAL SExPOTS)
		add_subdirs(xpdev)
		add_subdirectory(sexpots)
	endif()
	if(${PROJECT} STREQUAL Tone)
		add_subdirs(xpdev)
		add_subdirectory(tone)
	endif()
	if(${PROJECT} STREQUAL SMBLib)
		add_subdirs(xpdev)
		add_subdirectory(smblib)
	endif()
	if(${PROJECT} STREQUAL CIOXtrn)
		add_subdirs(xpdev conio)
		add_subdirectory(cioxtrn)
	endif()
endforeach()
