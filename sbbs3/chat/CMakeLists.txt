project (Chat C CXX)

cmake_minimum_required(VERSION 2.8)

add_custom_target(chat ALL
	COMMAND ${CMAKE_CURRENT_SOURCE_DIR}/build.bat
	DEPENDS ${CMAKE_CURRENT_SOURCE_DIR}/chat.cpp
		${CMAKE_CURRENT_SOURCE_DIR}/MainFormUnit.cpp
		${CMAKE_CURRENT_SOURCE_DIR}/MainFormUnit.dfm
		${CMAKE_CURRENT_SOURCE_DIR}/MainFormUnit.h
		${CMAKE_CURRENT_SOURCE_DIR}/chat.bpr
		${CMAKE_CURRENT_SOURCE_DIR}/chat.res
	WORKING_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR}
	SOURCES ${CMAKE_CURRENT_SOURCE_DIR}/chat.cpp
		${CMAKE_CURRENT_SOURCE_DIR}/MainFormUnit.cpp
		${CMAKE_CURRENT_SOURCE_DIR}/MainFormUnit.dfm
		${CMAKE_CURRENT_SOURCE_DIR}/MainFormUnit.h
		${CMAKE_CURRENT_SOURCE_DIR}/chat.bpr
		${CMAKE_CURRENT_SOURCE_DIR}/chat.res
)
file(COPY ${CMAKE_CURRENT_SOURCE_DIR}/chat.exe 
	DESTINATION ${CMAKE_CURRENT_BINARY_DIR}
)
